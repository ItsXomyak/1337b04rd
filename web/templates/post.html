<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Post.Title}}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #E6E9F5;
        }
        header {
            text-align: center;
            padding: 10px;
        }
        nav a {
            margin: 0 10px;
            text-decoration: none;
            color: blue;
        }
        nav a:hover {
            text-decoration: underline;
        }
        .post, .comment {
            margin: 10px;
            padding: 10px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .post img, .comment img.avatar {
            max-width: 200px;
            border-radius: 5px;
        }
        .comment img.avatar {
            width: 50px;
            vertical-align: middle;
        }
        .comment-content {
            display: inline-block;
            vertical-align: middle;
            margin-left: 10px;
        }
        .add-comment {
            margin: 10px;
        }
        .add-comment textarea {
            width: 100%;
            height: 100px;
        }
    </style>
</head>
<body>
<header>
    <h1>{{.Post.Title}}</h1>
    <nav>
        [<a href="/">Catalog</a>] |
        [<a href="/archive">Archive</a>] |
        [<a href="/create-post">Create Post</a>]
    </nav>
</header>
<main>
    <div class="post">
        <p><strong>{{.Post.DisplayName}}</strong> {{.Post.CreatedAt}} ID: {{.Post.ID}}</p>
        {{if .Post.ImageURL}}
        <img src="{{.Post.ImageURL}}" alt="Post Image">
        {{end}}
        <p>{{.Post.Content}}</p>
    </div>
    <div class="comments">
        <h2>Comments</h2>
        {{range .Comments}}
        <div class="comment">
            <img class="avatar" src="{{.AvatarURL}}" alt="User Avatar">
            <div class="comment-content">
                <p><strong>{{.DisplayName}}</strong> {{.CreatedAt}} ID: {{.ID}}</p>
                {{if .ParentCommentID}}
                <p><em>Reply to: <a href="#{{.ParentCommentID}}">{{.ParentCommentID}}</a></em></p>
                {{end}}
                {{if .ImageURL}}
                <img src="{{.ImageURL}}" alt="Comment Image">
                {{end}}
                <p>{{.Content}}</p>
            </div>
        </div>
        {{else}}
        <p>No comments yet.</p>
        {{end}}
    </div>
    <div class="add-comment">
        <h3>Add a Comment</h3>
        <form action="/submit-comment" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="thread_id" value="{{.Post.ID}}">
            <textarea name="comment" placeholder="Write your comment here..." required></textarea><br>
            <label>File: <input name="file" type="file"></label><br>
            <label>Reply to ID: <input name="parent_id" type="text"></label><br>
            <input type="submit" value="Submit">
        </form>
    </div>
</main>
</body>
</html>